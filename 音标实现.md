éŸ³æ ‡ç»ƒä¹ åŠŸèƒ½ - å®Œæ•´å®ç°æ–‡æ¡£
ä¸€ã€åŠŸèƒ½æ¦‚è¿°
é¡¹ç›®	è¯´æ˜
åŠŸèƒ½åç§°	éŸ³æ ‡ç»ƒä¹ ç³»ç»Ÿ
åŠŸèƒ½ç›®æ ‡	å¸®åŠ©å­¦ç”ŸæŒæ¡å•è¯å‘éŸ³è§„åˆ™ï¼Œå»ºç«‹å­—æ¯ä¸éŸ³æ ‡çš„å¯¹åº”å…³ç³»
æ ¸å¿ƒéš¾ç‚¹	è‹±è¯­å‘éŸ³ä¸è§„åˆ™ï¼Œæ— æ³•å®Œå…¨è‡ªåŠ¨åŒ–æ‹†åˆ†
è§£å†³æ–¹æ¡ˆ	äººå·¥é¢„è®¾æ•°æ® + è‡ªåŠ¨è¡¥å……è§£æ åŒè½¨å¹¶è¡Œ
äºŒã€æ•°æ®å±‚è®¾è®¡
2.1 è¯æ±‡æ•°æ®ç»“æ„ï¼ˆvocabulary.luaï¼‰
lua

å¤åˆ¶
-- å®Œæ•´è¯æ±‡æ¡ç›®ï¼ˆå«æ‰‹å·¥éŸ³æ ‡æ‹†åˆ†ï¼‰
{
    en = "outside",                    -- è‹±æ–‡å•è¯
    cn = "åœ¨å¤–é¢",                      -- ä¸­æ–‡é‡Šä¹‰
    phonetic = "/ËŒaÊŠtËˆsaÉªd/",          -- å®Œæ•´éŸ³æ ‡
    type = "adv",                       -- è¯æ€§
    breakdown = {                       -- ğŸ”‘ æ ¸å¿ƒï¼šæ‰‹å·¥æ‹†åˆ†æ•°æ®
        letters = "ou - t - s - i - de",           -- å­—æ¯æ‹†åˆ†
        sounds = "/aÊŠ/ - /t/ - /s/ - /aÉª/ - /d/", -- éŸ³ç´ å¯¹åº”
        tips = "ouä¸ºåŒå…ƒéŸ³/aÊŠ/ï¼Œi_eä¸ºåŒå…ƒéŸ³/aÉª/"    -- å‘éŸ³æç¤º
    }
}

-- ç®€åŒ–è¯æ±‡æ¡ç›®ï¼ˆæ— æ‰‹å·¥æ‹†åˆ†ï¼Œä½¿ç”¨è‡ªåŠ¨è§£æï¼‰
{
    en = "technology",
    cn = "ç§‘æŠ€",
    phonetic = "/tekËˆnÉ’lÉ™dÊ’i/",
    type = "noun"
    -- æ—  breakdownï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ç”Ÿæˆè§£æ
}
2.2 å­—æ¯ç»„åˆæ˜ å°„è¡¨ï¼ˆquestion_generator.luaï¼‰
lua

å¤åˆ¶
-- å¸¸è§å­—æ¯ç»„åˆåˆ°éŸ³æ ‡çš„æ˜ å°„ï¼ˆç”¨äºè‡ªåŠ¨è§£æï¼‰
local letterToPhonetic = {
    -- å…ƒéŸ³å­—æ¯ç»„åˆ
    ["ee"] = "/iË/ é•¿å…ƒéŸ³",    -- meet, see
    ["ea"] = "/iË/ é•¿å…ƒéŸ³",    -- read, teacher
    ["oo"] = "/uË/ é•¿å…ƒéŸ³",    -- food, school
    ["ou"] = "/aÊŠ/ åŒå…ƒéŸ³",    -- house, out
    ["ow"] = "/aÊŠ/ åŒå…ƒéŸ³",    -- how, now
    ["ai"] = "/eÉª/ åŒå…ƒéŸ³",    -- rain, wait
    ["ay"] = "/eÉª/ åŒå…ƒéŸ³",    -- day, play
    ["oi"] = "/É”Éª/ åŒå…ƒéŸ³",    -- join, coin
    ["oy"] = "/É”Éª/ åŒå…ƒéŸ³",    -- boy, toy
    ["ar"] = "/É‘Ë/ é•¿å…ƒéŸ³",    -- car, star
    ["or"] = "/É”Ë/ é•¿å…ƒéŸ³",    -- for, morning
    ["er"] = "/ÉœË/ é•¿å…ƒéŸ³",    -- her, teacher
    ["ir"] = "/ÉœË/ é•¿å…ƒéŸ³",    -- first, girl
    ["ur"] = "/ÉœË/ é•¿å…ƒéŸ³",    -- turn, nurse
    
    -- è¾…éŸ³å­—æ¯ç»„åˆ
    ["sh"] = "/Êƒ/ æ‘©æ“¦éŸ³",     -- she, shop
    ["ch"] = "/tÊƒ/ ç ´æ“¦éŸ³",    -- chair, teacher
    ["th"] = "/Î¸/ æ‘©æ“¦éŸ³",     -- think, three
    ["ng"] = "/Å‹/ é¼»éŸ³",       -- sing, ring
    ["ck"] = "/k/ çˆ†ç ´éŸ³",     -- back, clock
    ["ph"] = "/f/ æ‘©æ“¦éŸ³",     -- phone, photo
    ["wh"] = "/w/ åŠå…ƒéŸ³",     -- what, when
    ["wr"] = "/r/ é¢¤éŸ³",       -- write, wrong
    ["kn"] = "/n/ é¼»éŸ³",       -- know, knife
    ["mb"] = "/m/ é¼»éŸ³",       -- climb, lamb
    ["gh"] = "ä¸å‘éŸ³",         -- night, light
}
2.3 å…ƒéŸ³åˆ†ç±»è¡¨
lua

å¤åˆ¶
-- åŒå…ƒéŸ³ï¼ˆ8ä¸ªï¼‰
local diphthongs = {"eÉª", "aÉª", "É”Éª", "É™ÊŠ", "aÊŠ", "ÉªÉ™", "eÉ™", "ÊŠÉ™"}

-- é•¿å…ƒéŸ³ï¼ˆ5ä¸ªï¼‰
local longVowels = {"iË", "É‘Ë", "É”Ë", "uË", "ÉœË"}

-- çŸ­å…ƒéŸ³ï¼ˆ7ä¸ªï¼‰
local shortVowels = {"Éª", "e", "Ã¦", "É’", "ÊŠ", "ÊŒ", "É™"}
ä¸‰ã€é¢˜å‹è®¾è®¡
3.1 é¢˜å‹ä¸€ï¼šçœ‹éŸ³æ ‡é€‰å•è¯ï¼ˆPHONETIC_MATCHï¼‰
äº¤äº’æ–¹å¼ï¼šé€‰æ‹©é¢˜

lua

å¤åˆ¶
function QuestionGenerator.generatePhoneticMatch(words, variation)
    -- 1. ç­›é€‰æœ‰éŸ³æ ‡çš„å•è¯
    local wordsWithPhonetic = {}
    for _, w in ipairs(words) do
        if w.phonetic then
            table.insert(wordsWithPhonetic, w)
        end
    end
    
    -- 2. éšæœºé€‰æ‹©ç›®æ ‡å•è¯
    local word = wordsWithPhonetic[math.random(1, #wordsWithPhonetic)]
    
    -- 3. éšæœºé€‰æ‹©3ä¸ªå¹²æ‰°é¡¹
    local options = randomSelect(wordsWithPhonetic, 3, {word})
    table.insert(options, word)
    options = shuffle(options)
    
    -- 4. ç”Ÿæˆé¢˜ç›®
    return {
        type = "PHONETIC_MATCH",
        question = "éŸ³æ ‡ " .. word.phonetic .. " å¯¹åº”å“ªä¸ªå•è¯ï¼Ÿ",
        options = {opt1.en, opt2.en, opt3.en, opt4.en},
        correctAnswer = correctIndex,
        explanation = generateExplanation(word)
    }
end
ç¤ºä¾‹ï¼š

é¢˜ç›®ï¼šéŸ³æ ‡ /laÉªf/ å¯¹åº”å“ªä¸ªå•è¯ï¼Ÿ
A. life  âœ“
B. live
C. leave
D. love

è§£æï¼š
æ­£ç¡®ç­”æ¡ˆï¼šlife
éŸ³å½¢æ‹†è§£ï¼š
  l - i - fe
  /l/ - /aÉª/ - /f/
è§£æï¼šiä¸ºåŒå…ƒéŸ³/aÉª/
3.2 é¢˜å‹äºŒï¼šçœ‹å•è¯é€‰éŸ³æ ‡ï¼ˆWORD_TO_PHONETICï¼‰
äº¤äº’æ–¹å¼ï¼šé€‰æ‹©é¢˜

lua

å¤åˆ¶
function QuestionGenerator.generateWordToPhonetic(words, variation)
    -- 1. ç­›é€‰æœ‰éŸ³æ ‡çš„å•è¯
    -- 2. éšæœºé€‰æ‹©ç›®æ ‡å•è¯
    -- 3. ç”¨å…¶ä»–å•è¯çš„éŸ³æ ‡ä½œä¸ºå¹²æ‰°é¡¹
    
    return {
        type = "WORD_TO_PHONETIC",
        question = 'å•è¯ "break" çš„éŸ³æ ‡æ˜¯ï¼Ÿ',
        options = {"/breÉªk/", "/briËk/", "/brÊŒk/", "/brÉ’k/"},
        correctAnswer = 1,
        explanation = generateExplanation(word)
    }
end
ç¤ºä¾‹ï¼š

é¢˜ç›®ï¼šå•è¯ "break" çš„éŸ³æ ‡æ˜¯ï¼Ÿ
A. /breÉªk/  âœ“
B. /briËk/
C. /brÊŒk/
D. /brÉ’k/

è§£æï¼š
æ­£ç¡®ç­”æ¡ˆï¼š/breÉªk/
éŸ³å½¢æ‹†è§£ï¼š
  br - ea - k
  /br/ - /eÉª/ - /k/
è§£æï¼šeaä¸ºåŒå…ƒéŸ³/eÉª/
3.3 é¢˜å‹ä¸‰ï¼šæ ¹æ®éŸ³æ ‡æ‹¼å†™å•è¯ï¼ˆSPELLING_WITH_PHONETICï¼‰
äº¤äº’æ–¹å¼ï¼šæ–‡æœ¬è¾“å…¥

lua

å¤åˆ¶
function QuestionGenerator.generateSpellingWithPhonetic(words, variation)
    -- ç­›é€‰éŸ³æ ‡å•è¯ä¸”é•¿åº¦â‰¤8ï¼ˆå¤ªé•¿çš„ä¸é€‚åˆæ‹¼å†™ï¼‰
    local wordsWithPhonetic = {}
    for _, w in ipairs(words) do
        if w.phonetic and #w.en <= 8 then
            table.insert(wordsWithPhonetic, w)
        end
    end
    
    return {
        type = "SPELLING_WITH_PHONETIC",
        question = "æ ¹æ®éŸ³æ ‡å†™å‡ºå•è¯ï¼š",
        phoneticDisplay = "/klÊŒb/",      -- æ˜¾ç¤ºéŸ³æ ‡
        chineseHint = "ç¤¾å›¢ï¼›ä¿±ä¹éƒ¨",     -- ä¸­æ–‡æç¤º
        isTextInput = true,               -- æ–‡æœ¬è¾“å…¥æ¨¡å¼
        correctAnswer = "club",
        explanation = generateExplanation(word)
    }
end
ç¤ºä¾‹ï¼š

é¢˜ç›®ï¼šæ ¹æ®éŸ³æ ‡å†™å‡ºå•è¯ï¼š
      /klÊŒb/
æç¤ºï¼šç¤¾å›¢ï¼›ä¿±ä¹éƒ¨

è¾“å…¥æ¡†ï¼š[club]

è§£æï¼š
æ­£ç¡®ç­”æ¡ˆï¼šclub
éŸ³å½¢æ‹†è§£ï¼š
  cl - u - b
  /kl/ - /ÊŒ/ - /b/
è§£æï¼šuä¸ºçŸ­å…ƒéŸ³/ÊŒ/
å››ã€è§£æç”Ÿæˆé€»è¾‘
4.1 ä¼˜å…ˆçº§ç­–ç•¥
lua

å¤åˆ¶
function generateExplanation(word)
    local parts = {"æ­£ç¡®ç­”æ¡ˆï¼š" .. word.en}
    
    -- ä¼˜å…ˆçº§1ï¼šä½¿ç”¨äººå·¥é¢„è®¾çš„æ‹†åˆ†æ•°æ®
    if word.breakdown then
        table.insert(parts, "éŸ³å½¢æ‹†è§£ï¼š")
        table.insert(parts, "  " .. word.breakdown.letters)
        table.insert(parts, "  " .. word.breakdown.sounds)
        table.insert(parts, "è§£æï¼š" .. word.breakdown.tips)
    else
        -- ä¼˜å…ˆçº§2ï¼šè‡ªåŠ¨è¯†åˆ«ä¸»è¦å…ƒéŸ³ç±»å‹
        local vowelType = getMainVowelType(word.phonetic)
        if vowelType then
            table.insert(parts, "è§£æï¼šä¸»è¦å…ƒéŸ³ä¸º" .. vowelType)
        end
    end
    
    return table.concat(parts, "\n")
end
4.2 è‡ªåŠ¨å…ƒéŸ³è¯†åˆ«
lua

å¤åˆ¶
local function getMainVowelType(phonetic)
    if not phonetic then return nil end
    
    -- 1. ä¼˜å…ˆæ£€æŸ¥åŒå…ƒéŸ³ï¼ˆæ›´é•¿çš„æ¨¡å¼ï¼‰
    local diphthongs = {"eÉª", "aÉª", "É”Éª", "É™ÊŠ", "aÊŠ", "ÉªÉ™", "eÉ™", "ÊŠÉ™"}
    for _, d in ipairs(diphthongs) do
        if string.find(phonetic, d) then
            return "åŒå…ƒéŸ³ /" .. d .. "/"
        end
    end
    
    -- 2. æ£€æŸ¥é•¿å…ƒéŸ³
    local longVowels = {"iË", "É‘Ë", "É”Ë", "uË", "ÉœË"}
    for _, v in ipairs(longVowels) do
        if string.find(phonetic, v) then
            return "é•¿å…ƒéŸ³ /" .. v .. "/"
        end
    end
    
    -- 3. æ£€æŸ¥çŸ­å…ƒéŸ³
    local shortVowels = {"Éª", "e", "Ã¦", "É’", "ÊŠ", "ÊŒ", "É™"}
    for _, v in ipairs(shortVowels) do
        if string.find(phonetic, v) then
            return "çŸ­å…ƒéŸ³ /" .. v .. "/"
        end
    end
    
    return nil
end
äº”ã€æ•°æ®ç»Ÿè®¡
5.1 è¯æ±‡è¦†ç›–æƒ…å†µ
å•å…ƒ	æ€»è¯æ•°	å«éŸ³æ ‡	å«æ‰‹å·¥æ‹†åˆ†
Unit 1	34	34 (100%)	22 (65%)
Unit 2	30	30 (100%)	25 (83%)
Unit 3	28	28 (100%)	20 (71%)
Unit 4	32	32 (100%)	18 (56%)
Unit 5	29	29 (100%)	21 (72%)
Unit 6	31	31 (100%)	19 (61%)
åˆè®¡	184	184 (100%)	125 (68%)
5.2 æ‹†åˆ†ç¤ºä¾‹å±•ç¤º
å•è¯	éŸ³æ ‡	å­—æ¯æ‹†åˆ†	éŸ³ç´ æ‹†åˆ†	å‘éŸ³æç¤º
life	/laÉªf/	l - i - fe	/l/ - /aÉª/ - /f/	iä¸ºåŒå…ƒéŸ³/aÉª/
daughter	/ËˆdÉ”ËtÉ™Â®/	d - augh - ter	/d/ - /É”Ë/ - /tÉ™/	aughä¸ºé•¿å…ƒéŸ³/É”Ë/
receive	/rÉªËˆsiËv/	r - e - c - ei - ve	/r/ - /Éª/ - /s/ - /iË/ - /v/	eiä¸ºé•¿å…ƒéŸ³/iË/
outside	/ËŒaÊŠtËˆsaÉªd/	ou - t - s - i - de	/aÊŠ/ - /t/ - /s/ - /aÉª/ - /d/	ouä¸º/aÊŠ/ï¼Œi_eä¸º/aÉª/
å…­ã€ä¸ºä»€ä¹ˆé‡‡ç”¨äººå·¥é¢„è®¾ï¼Ÿ
6.1 è‹±è¯­å‘éŸ³çš„ä¸è§„åˆ™æ€§
é—®é¢˜	ç¤ºä¾‹	è¯´æ˜
åŒå½¢å¼‚éŸ³	read â†’ /riËd/ æˆ– /red/	æ ¹æ®æ—¶æ€ä¸åŒå‘éŸ³ä¸åŒ
é™é»˜å­—æ¯	knife â†’ kä¸å‘éŸ³	æ— æ³•é€šè¿‡è§„åˆ™åˆ¤æ–­
ç»„åˆå¤šä¹‰	ough â†’ /ÊŒf/, /É”Ë/, /aÊŠ/, /É™ÊŠ/	cough/bought/bough/though
å¤–æ¥è¯	cafÃ© â†’ /ËˆkÃ¦feÉª/	ä¸éµå¾ªè‹±è¯­è§„åˆ™
6.2 æ•™å­¦å‡†ç¡®æ€§è¦æ±‚
å…­å¹´çº§å­¦ç”Ÿéœ€è¦ç²¾ç¡®çš„éŸ³æ ‡å¯¹åº”
é”™è¯¯çš„è‡ªåŠ¨æ‹†åˆ†ä¼šè¯¯å¯¼å­¦ä¹ 
äººå·¥æ ‡æ³¨ç¡®ä¿æ¯ä¸ªæ‹†åˆ†éƒ½ç¬¦åˆæ•™å­¦è§„èŒƒ
6.3 åŒè½¨ç­–ç•¥çš„ä¼˜åŠ¿
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  è§£æç”Ÿæˆæµç¨‹                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚   è¯æ±‡æ•°æ® â”€â”¬â”€â†’ æœ‰ breakdown â”€â†’ ä½¿ç”¨äººå·¥æ‹†åˆ†     â”‚
â”‚             â”‚        (ç²¾ç¡®)                      â”‚
â”‚             â”‚                                   â”‚
â”‚             â””â”€â†’ æ—  breakdown â”€â†’ è‡ªåŠ¨è¯†åˆ«å…ƒéŸ³     â”‚
â”‚                      (è¡¥å……)                      â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
äººå·¥æ•°æ®ï¼šä¿è¯æ ¸å¿ƒè¯æ±‡çš„æ•™å­¦å‡†ç¡®æ€§
è‡ªåŠ¨è¡¥å……ï¼šä¸ºæœªæ ‡æ³¨è¯æ±‡æä¾›åŸºæœ¬è§£æï¼Œä¸ç•™ç©ºç™½
ä¸ƒã€æ–‡ä»¶ç»“æ„
scripts/
â”œâ”€â”€ vocabulary.lua           # è¯æ±‡æ•°æ®ï¼ˆå«éŸ³æ ‡å’Œbreakdownï¼‰
â”‚   â”œâ”€â”€ unit1 = {...}        # Unit 1 è¯æ±‡
â”‚   â”œâ”€â”€ unit2 = {...}        # Unit 2 è¯æ±‡
â”‚   â””â”€â”€ getAllWords()        # è·å–å…¨éƒ¨è¯æ±‡
â”‚
â””â”€â”€ question_generator.lua   # é¢˜ç›®ç”Ÿæˆå™¨
    â”œâ”€â”€ letterToPhonetic     # å­—æ¯ç»„åˆæ˜ å°„è¡¨
    â”œâ”€â”€ getMainVowelType()   # å…ƒéŸ³ç±»å‹è¯†åˆ«
    â”œâ”€â”€ generatePhoneticMatch()      # é¢˜å‹1ï¼šçœ‹éŸ³æ ‡é€‰å•è¯
    â”œâ”€â”€ generateWordToPhonetic()     # é¢˜å‹2ï¼šçœ‹å•è¯é€‰éŸ³æ ‡
    â””â”€â”€ generateSpellingWithPhonetic() # é¢˜å‹3ï¼šæ ¹æ®éŸ³æ ‡æ‹¼å†™
æ€»ç»“ï¼šéŸ³æ ‡åŠŸèƒ½é‡‡ç”¨äººå·¥é¢„è®¾ä¸ºä¸»ã€è‡ªåŠ¨è§£æä¸ºè¾…çš„ç­–ç•¥ï¼Œåœ¨è¯æ±‡è¡¨ä¸­é¢„ç½® breakdown å­—æ®µå­˜å‚¨ç²¾ç¡®çš„éŸ³å½¢æ‹†åˆ†ï¼ŒåŒæ—¶é€šè¿‡å­—æ¯ç»„åˆæ˜ å°„è¡¨å’Œå…ƒéŸ³è¯†åˆ«ç®—æ³•ä¸ºæœªæ ‡æ³¨è¯æ±‡æä¾›è¡¥å……è§£æï¼Œå…¼é¡¾æ•™å­¦å‡†ç¡®æ€§å’ŒåŠŸèƒ½å®Œæ•´æ€§ã€‚