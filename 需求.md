学习小卫士 - 应用总结
一、应用定位与作用
学习小卫士是一款面向六年级学生的英语学习辅助应用，通过游戏化机制激励学生进行英语练习，涵盖词汇、语法、句型等知识点。

二、核心功能模块
1. 答题练习系统
8大知识专项：词汇翻译、冠词a/an、动词三单、人称代词、名词复数、句型结构、特殊疑问句、音标练习
题型多样：选择题、填空题、中英互译
即时反馈：答对/答错音效、正确答案解析
2. 等级与段位系统
等级系统：通过答题获得经验值升级（Lv.1 → Lv.99）
段位系统：黑铁 → 青铜 → 白银 → 黄金 → 铂金 → 钻石 → 大师 → 王者
积分机制：答对+5分，答错-2分
3. 成就与称号系统
16个成就/称号：基于答对数、答错数、连续答对等条件解锁
称号佩戴：完成成就后领取称号，可在个人信息界面切换佩戴
示例称号：初学乍练、小有成就、学富五车、屡败屡战等
4. 商城系统
消耗品：翻倍卡（积分翻倍）、免扣卡（答错不扣分）、排除卡（排除错误选项）
装饰品：头像框（金色、钻石）、答对特效（烟花、星星、彩虹）
宠物食物：用于喂养学习伙伴
5. 学习伙伴（宠物）系统
宠物养成：通过喂食提升亲密度
互动功能：抚摸、喂食
奖励机制：亲密度达标可领取积分奖励
6. 每日任务系统
每日目标：答题数量、正确数量、连续答对等
任务奖励：完成任务获得积分
7. 限时挑战模式
5分钟计时：在限定时间内尽可能多答题
挑战排名：记录最佳成绩
8. 个人信息系统
自定义头像：30+表情图标可选
背景颜色：多种颜色主题
头像框：普通/金色/钻石框
称号面板：展示所有称号，已获得高亮，未获得置灰
9. 学习统计
总体数据：总答题数、正确数、准确率
分类统计：各知识专项的掌握度和进度
三、数据系统
玩家数据存储（player_data.lua）
playerData = {
    name = "学习者",        -- 玩家昵称
    points = 0,             -- 积分
    level = 1,              -- 等级
    exp = 0,                -- 经验值
    totalCorrect = 0,       -- 总答对数
    totalWrong = 0,         -- 总答错数
    items = {},             -- 背包物品
    avatar = "avatar_1",    -- 当前头像
    avatarBgColor = "blue", -- 头像背景色
    equippedFrame = nil,    -- 装备的头像框
    equippedEffect = nil,   -- 装备的特效
    currentTitle = nil,     -- 当前称号
    unlockedAchievements = {},  -- 已解锁成就
    categoryStats = {},     -- 分类答题统计
    petAffection = 0,       -- 宠物亲密度
}
云存储
使用 clientScore API 进行云端数据持久化
支持跨设备数据同步
四、代码结构
/workspace/scripts/
├── main.lua                 -- 主程序入口（3954行）
│   ├── 游戏状态机（17个状态）
│   ├── UI渲染（NanoVG绑定）
│   ├── 输入处理（点击、文本输入）
│   └── 游戏逻辑（答题、计分）
│
├── player_data.lua          -- 玩家数据管理
│   ├── 数据读写
│   ├── 等级/段位计算
│   ├── 物品/装备管理
│   └── 云存储同步
│
├── question_generator.lua   -- 题目生成器
│   ├── 8大分类题库
│   ├── 难度配置
│   └── 随机题目生成
│
├── vocabulary.lua           -- 词汇库（六年级英语单词）
│
├── achievement_system.lua   -- 成就系统
│   ├── 16个成就定义
│   ├── 解锁条件检测
│   └── 称号管理
│
├── daily_quest.lua          -- 每日任务
│
├── shop_ui.lua              -- 商城UI模块
│   ├── 商城界面
│   ├── 个人信息界面
│   ├── 玩家信息栏
│   └── 称号面板
│
└── effects.lua              -- 特效系统
五、技术栈
组件	技术
游戏引擎	UrhoX (SCE/星火编辑器)
脚本语言	Lua 5.4
UI渲染	NanoVG（矢量图形）
数据存储	clientScore 云变量
发布平台	TapTap
六、游戏状态流程
启动 → 科目选择 → 答题练习 → 结果展示
         ↓
    ├── 商城
    ├── 个人信息
    ├── 成就系统
    ├── 每日任务
    ├── 学习统计
    ├── 学习伙伴
    └── 限时挑战

学习小卫士 - 功能策划文档
一、答题练习系统
1.1 功能概述
项目	说明
功能名称	答题练习系统
功能目标	提供英语知识点练习，帮助学生巩固六年级英语知识
目标用户	六年级学生
1.2 用户故事
作为学生，我希望能选择特定知识点进行针对性练习
作为学生，我希望答题后能立即知道对错并看到正确答案
作为学生，我希望能记录错题以便复习
1.3 功能规则
知识分类（8大专项）：

分类ID	名称	描述
vocabulary	词汇翻译	单词中英互译练习
articles	冠词a/an	不定冠词用法练习
third_person	动词三单	第三人称单数变化
pronouns	人称代词	主格/宾格代词用法
plurals	名词复数	名词复数形式变化
sentence	句型结构	基本句型练习
questions	特殊疑问句	疑问词用法练习
phonetics	音标练习	音标识别与拼读
题型规则：

题型	交互方式	判定规则
单选题	点击选项	选中即判定
填空题	文本输入	忽略大小写，去除首尾空格后比对
答题流程：

选择分类 → 生成题目(默认50题) → 显示题目 → 用户作答 
    → 判定对错 → 显示解析(2秒) → 下一题 → 完成后显示结果
1.4 UI说明
题目区：显示题干，居中偏上
选项区：4个选项按钮，垂直排列
输入区：填空题显示文本输入框+确认按钮
进度条：顶部显示当前题号/总题数
反馈动画：答对绿色✓，答错红色✗
1.5 数据记录
lua

复制
-- 每次答题记录
{
    categoryId = "vocabulary",  -- 分类ID
    isCorrect = true,           -- 是否正确
    timestamp = 1234567890      -- 时间戳
}
二、等级与段位系统
2.1 功能概述
项目	说明
功能名称	等级与段位系统
功能目标	通过成长体系激励学生持续学习
核心机制	经验值升级 + 积分段位
2.2 用户故事
作为学生，我希望看到自己的学习进度和成长
作为学生，我希望通过努力获得更高的段位称号
作为学生，我希望积分能用来兑换奖励
2.3 等级规则
经验值获取：

行为	经验值
答对1题	+10 EXP
答错1题	+2 EXP
完成每日任务	+50 EXP
升级公式：

lua

复制
-- 升到下一级所需经验
expNeeded = level * 100 + 50
-- 例：Lv.1→Lv.2 需要 150 EXP
--     Lv.10→Lv.11 需要 1050 EXP
等级上限： Lv.99

2.4 段位规则
积分变动：

行为	积分变化
答对1题	+5 分
答错1题	-2 分
使用翻倍卡	答对积分×2
使用免扣卡	答错不扣分
段位阶梯：

段位	积分区间	颜色
黑铁	0-99	#4A4A4A
青铜	100-299	#CD7F32
白银	300-599	#C0C0C0
黄金	600-999	#FFD700
铂金	1000-1499	#00CED1
钻石	1500-2499	#00BFFF
大师	2500-3999	#9400D3
王者	4000+	#FF4500
2.5 UI说明
左上角玩家栏：头像 + 称号名+用户名 + 段位Lv.X + 经验条
经验条：绿色进度条，显示当前经验/升级所需
段位颜色：文字使用段位对应颜色显示
三、成就与称号系统
3.1 功能概述
项目	说明
功能名称	成就与称号系统
功能目标	提供里程碑目标，增加成就感和身份标识
核心机制	达成条件 → 领取称号 → 佩戴展示
3.2 用户故事
作为学生，我希望完成特定目标后获得荣誉称号
作为学生，我希望能选择喜欢的称号展示给别人看
作为学生，我希望能查看所有可获得的称号及进度
3.3 成就列表
答对数成就：

ID	称号名	图标	条件
correct_10	初学乍练	🌱	累计答对10题
correct_50	小有成就	🌿	累计答对50题
correct_100	学有所成	🌳	累计答对100题
correct_500	学富五车	📚	累计答对500题
correct_1000	博学多才	🎓	累计答对1000题
答错数成就：

ID	称号名	图标	条件
wrong_50	屡败屡战	💪	累计答错50题
wrong_100	百折不挠	🔥	累计答错100题
wrong_200	越挫越勇	⚡	累计答错200题
连续答对成就：

ID	称号名	图标	条件
streak_10	小试牛刀	⭐	连续答对10题
streak_20	渐入佳境	🌟	连续答对20题
streak_50	势如破竹	💫	连续答对50题
streak_100	百战百胜	👑	连续答对100题
特殊成就：

ID	称号名	图标	条件
first_perfect	开门红	🎯	首次全对(10题以上)
daily_7	周勤学者	📅	连续7天完成每日任务
daily_30	月勤学者	🏆	连续30天完成每日任务
master_all	全能学霸	🎖️	所有分类准确率≥80%
3.4 功能流程
成就状态三态：

未完成(灰色) → 可领取(金色+领取按钮) → 已领取(绿色+可佩戴)
领取与佩戴：

达成条件后，成就界面显示"🎁 领取"按钮
点击领取，解锁称号，自动佩戴
在个人信息-称号面板可切换佩戴其他已解锁称号
3.5 UI说明
成就界面：

卡片列表展示所有成就
未完成：灰色背景，显示进度 X/目标
可领取：金色背景，显示"🎁 领取"
已领取：绿色背景，显示"点击佩戴"或"⭐ 当前佩戴"
称号面板（个人信息页）：

网格展示所有称号
已解锁：绿色高亮，点击可佩戴
未解锁：灰色置暗+🔒图标
当前佩戴：蓝色高亮+白色边框
四、商城系统
4.1 功能概述
项目	说明
功能名称	商城系统
功能目标	提供积分消费出口，增加游戏深度
核心机制	积分购买 → 背包存储 → 使用生效
4.2 用户故事
作为学生，我希望用积分购买有用的道具帮助答题
作为学生，我希望购买装饰品个性化我的角色
作为学生，我希望能查看已拥有的物品数量
4.3 商品列表
消耗品（可叠加，使用后消耗）：

ID	名称	价格	效果	持续
double_points	翻倍卡	50分	答对积分×2	5题
shield	免扣卡	30分	答错不扣分	3题
eliminate	排除卡	20分	排除1个错误选项	1次
宠物食物（可叠加，喂食消耗）：

ID	名称	价格	效果
pet_food_basic	普通猫粮	10分	亲密度+5
pet_food_premium	高级猫粮	30分	亲密度+15
pet_food_deluxe	豪华猫粮	80分	亲密度+50
头像框（永久，购买即解锁）：

ID	名称	价格	效果
frame_gold	金色头像框	200分	金色边框
frame_diamond	钻石头像框	500分	蓝色闪耀边框
答对特效（永久，购买即解锁）：

ID	名称	价格	效果
effect_firework	烟花特效	150分	答对时烟花绽放
effect_star	星星特效	100分	答对时星星飞散
effect_rainbow	彩虹特效	300分	答对时彩虹划过
4.4 购买规则
lua

复制
-- 购买条件
if playerPoints >= itemPrice then
    playerPoints = playerPoints - itemPrice
    if item.type == "consumable" or item.type == "pet_food" then
        backpack[itemId] = (backpack[itemId] or 0) + 1
    else
        unlocked[itemId] = true
    end
end
4.5 UI说明
分类标签：消耗品 | 装饰 | 宠物
商品卡片：图标 + 名称 + 价格 + 已拥有数量
购买按钮：积分足够显示价格，不足显示"积分不足"
右上角：显示当前积分 💰 XXX
五、学习伙伴（宠物）系统
5.1 功能概述
项目	说明
功能名称	学习伙伴系统
功能目标	增加情感陪伴，提升用户粘性
核心机制	喂食养成 → 亲密度提升 → 领取奖励
5.2 用户故事
作为学生，我希望有一个可爱的伙伴陪我学习
作为学生，我希望通过照顾伙伴获得奖励
作为学生，我希望看到伙伴的成长变化
5.3 宠物属性
lua

复制
pet = {
    name = "小橘",           -- 宠物名称
    affection = 0,           -- 亲密度 (0-1000)
    lastFeedTime = 0,        -- 上次喂食时间
    lastPetTime = 0,         -- 上次抚摸时间
}
5.4 互动规则
喂食：

食物	亲密度增加	冷却时间
普通猫粮	+5	无
高级猫粮	+15	无
豪华猫粮	+50	无
抚摸：

每次抚摸 +1 亲密度
冷却时间：10秒
5.5 亲密度奖励
亲密度	奖励	状态
100	20积分	可领取一次
300	50积分	可领取一次
500	100积分	可领取一次
800	200积分	可领取一次
1000	500积分	可领取一次
5.6 UI说明
宠物形象：居中显示大号emoji（🐱）
亲密度条：心形图标 + 进度条 + 数值
食物栏：底部显示已有食物，点击喂食
互动按钮：抚摸按钮（有冷却提示）
奖励提示：达到里程碑时弹出领取按钮
六、每日任务系统
6.1 功能概述
项目	说明
功能名称	每日任务系统
功能目标	引导用户每日登录和学习，养成习惯
核心机制	每日重置 → 完成任务 → 领取奖励
6.2 用户故事
作为学生，我希望每天有明确的学习目标
作为学生，我希望完成任务后获得额外奖励
作为学生，我希望看到今日的完成进度
6.3 任务列表
任务ID	名称	目标	奖励
daily_answer_10	今日答题	答题10道	20积分
daily_answer_30	勤奋学习	答题30道	50积分
daily_correct_5	正确5题	答对5道	15积分
daily_correct_20	正确20题	答对20道	40积分
daily_streak_5	连续5题	连续答对5题	30积分
daily_category	专项练习	完成任意1个分类练习	25积分
6.4 重置规则
每日 00:00 (北京时间) 重置所有任务进度
未领取的奖励在重置后失效
连续完成天数单独记录（用于成就）
6.5 UI说明
任务列表：卡片形式展示
进度显示：进度条 + 当前/目标
领取按钮：完成后高亮显示"领取"
已领取状态：显示"✓ 已完成"
顶部统计：今日已完成 X/6
七、限时挑战模式
7.1 功能概述
项目	说明
功能名称	限时挑战模式
功能目标	提供紧张刺激的挑战体验，检验学习成果
核心机制	限定时间 → 尽可能多答题 → 记录最佳成绩
7.2 用户故事
作为学生，我希望有更刺激的挑战模式
作为学生，我希望能挑战自己的最高记录
作为学生，我希望在时间压力下提升反应速度
7.3 挑战规则
项目	规则
时间限制	5分钟（300秒）
题目来源	综合所有分类，随机生成
题目数量	无上限（答完自动下一题）
计分规则	仅统计正确数，答错不扣分
结束条件	时间归零
7.4 奖励规则
成绩	奖励
答对10题	30积分
答对20题	70积分
答对30题	120积分
答对50题	250积分
刷新最高记录	额外+50积分
7.5 UI说明
顶部计时器：大字体倒计时显示，最后30秒变红
题目区：简化显示，突出题目和选项
实时统计：当前答对数 / 当前答错数
结束弹窗：显示本次成绩、最高记录、获得奖励
八、个人信息系统
8.1 功能概述
项目	说明
功能名称	个人信息系统
功能目标	提供个性化设置，展示玩家身份
核心机制	自定义外观 → 保存配置 → 全局展示
8.2 用户故事
作为学生，我希望能修改我的昵称
作为学生，我希望能选择喜欢的头像和颜色
作为学生，我希望能装备购买的头像框和特效
8.3 可配置项
头像选择（30+选项）：

lua

复制
avatars = {
    {id = "avatar_1", icon = "😀"},
    {id = "avatar_2", icon = "😎"},
    {id = "avatar_3", icon = "🤓"},
    -- ... 更多表情
}
背景颜色（10+选项）：

lua

复制
colors = {
    {id = "blue", color = {66, 133, 244}},
    {id = "green", color = {52, 168, 83}},
    {id = "red", color = {234, 67, 53}},
    -- ... 更多颜色
}
头像框（需购买解锁）：

默认框（免费）
金色框（200积分）
钻石框（500积分）
称号面板：

显示全部16个称号
已解锁：高亮可点击佩戴
未解锁：灰色+🔒图标
8.4 昵称修改规则
长度限制：2-8个字符
禁止特殊符号
修改后立即生效
8.5 UI说明
左侧：个人卡片（头像、昵称、段位、称号、统计）
右侧上：头像选择网格（3行×10列）
右侧中：背景颜色选择（1行×10个）
右侧中：头像框选择（已解锁的）
右侧下：称号面板（4行×4列）
九、学习统计系统
9.1 功能概述
项目	说明
功能名称	学习统计系统
功能目标	可视化学习数据，帮助用户了解学习情况
核心机制	记录数据 → 分类统计 → 图表展示
9.2 用户故事
作为学生，我希望看到我的总体学习情况
作为学生，我希望知道哪些知识点掌握得好，哪些需要加强
作为学生，我希望看到自己的进步
9.3 统计维度
总体统计：

指标	说明
总答题数	累计答题总数
正确数	累计答对题数
准确率	正确数/总数×100%
分类统计（8个分类）：

指标	说明
分类答题数	该分类累计答题数
分类正确数	该分类累计答对数
分类准确率	分类正确数/分类答题数×100%
掌握度标签	根据准确率显示：未开始/需加强/学习中/熟练/精通
9.4 掌握度标准
准确率	掌握度	颜色
0% (无记录)	未开始	灰色
1-49%	需加强	红色
50-69%	学习中	橙色
70-89%	熟练	黄色
90-100%	精通	绿色
9.5 UI说明
顶部：总体统计概览
主体：8个分类卡片网格（3列）
卡片内容：图标 + 分类名 + 准确率 + 进度条 + 掌握度标签
十、数据存储系统
10.1 功能概述
项目	说明
功能名称	数据存储系统
功能目标	持久化玩家数据，支持跨设备同步
核心机制	本地缓存 + 云端同步
10.2 数据结构
lua

复制
playerData = {
    -- 基础信息
    name = "学习者",
    
    -- 等级系统
    level = 1,
    exp = 0,
    points = 0,
    
    -- 答题统计
    totalCorrect = 0,
    totalWrong = 0,
    maxStreak = 0,
    categoryStats = {
        ["vocabulary"] = {correct = 0, wrong = 0, total = 0},
        -- ... 其他分类
    },
    
    -- 道具背包
    items = {
        ["double_points"] = 0,
        ["shield"] = 0,
        -- ... 其他道具
    },
    
    -- Buff状态
    doublePointsRemaining = 0,
    shieldRemaining = 0,
    
    -- 外观配置
    avatar = "avatar_1",
    avatarBgColor = "blue",
    equippedFrame = nil,
    equippedEffect = nil,
    
    -- 成就系统
    currentTitle = nil,
    unlockedAchievements = {},
    
    -- 宠物系统
    petAffection = 0,
    petRewardsClaimed = {},
    
    -- 每日任务
    dailyQuestProgress = {},
    dailyQuestClaimed = {},
    lastDailyReset = 0,
    
    -- 限时挑战
    timedChallengeBest = 0,
}
10.3 同步策略
触发时机	操作
答题结束	自动保存
购买商品	立即保存
领取奖励	立即保存
修改设置	立即保存
退出应用	强制保存
10.4 云存储接口
lua

复制
-- 保存到云端
clientScore.set("playerData", jsonEncode(playerData))

-- 从云端读取
local data = clientScore.get("playerData")
playerData = jsonDecode(data)
以上为学习小卫士全部10个功能模块的策划文档，涵盖功能定义、规则说明、UI设计和数据结构。